# node 层与 view 层间的通信

借助 `WebSocket` 服务，在 `node` 层与 `view` 层间建立通信。

初次启动时，根据配置项初始化 UI 页面。

## 当默认配置中未启动 `size` 分析时

最初只展示不包含 `size` 信息的 UI 界面，当 UI 界面加载完成后，通过 `ws` 告知 `node` 层可以懒加载 `size` 信息，`node` 层进行计算，然后将结果通过 `ws` 传回，且不影响当前页面的操作，基本做到无感加载。

## 当从 UI 页面改变 depth 时

通过 `ws` 告知 `node` 层，`node` 层重新计算，然后将结果通过 `ws` 传回。

若配置项中未启动 `size` 分析，则会继续懒加载 size 信息。

## 当前项目的依赖发生变化时

`node` 层监听 `package.json` 文件中相关信息的变化，当发生变化时，重新计算依赖关系，然后将结果通过 `ws` 传回。
